services:
    _defaults:
        autowire: true
        autoconfigure: true

    ReactBundle\:
        resource: '../../src/*'
        exclude:
            - '../../src/DependencyInjection'
            - '../../src/ReactBundle.php'
            - '../../src/Composer'

    ReactBundle\Service\ReactRenderer:
        arguments:
            $twig: '@twig'
            $buildDir: '%react.build_dir%'
            $logger: '@?logger'

    ReactBundle\Twig\ReactExtension:
        tags:
            - { name: twig.extension }

    ReactBundle\Twig\ViteExtension:
        arguments:
            $isDev: '%kernel.debug%'
            $viteServer: '%react.vite_server%'
            $buildDir: '%react.build_dir%'
        tags:
            - { name: twig.extension }
        calls:
            - [setEnvironment, ['%kernel.environment%']]

    ReactBundle\Command\ReactDevCheckCommand:
        arguments:
            $viteServer: '%react.vite_server%'
            $isDev: '%kernel.debug%'
        tags:
            - { name: console.command }